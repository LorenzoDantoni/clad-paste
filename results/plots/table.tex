
\begin{table*}[th]
    \centering
    \captionsetup{justification=centering}
    \caption{Performance comparison of Anomaly Detection strategies in the Continual Learning setting. Green reports the best value for each metric, while red shows the worst. All the metrics considered are described in Sec. \ref{sec:experimental_setting}, while each tested AD method is explained in \ref{sec:considered_methods}.}
    \label{tab:finalresults}
    \begin{adjustbox}{max width=1.2\textwidth,center}
    \begin{tabular}{|lc|c|c|c|c|c|c|c|}
    \hline
    \multicolumn{2}{|l|}{} & \multicolumn{1}{c|}{\textbf{\begin{tabular}[c]{@{}c@{}}Reconstruction \\ based\end{tabular}}} & \multicolumn{3}{c|}{\textbf{Memory Bank}} & \multicolumn{2}{c|}{\textbf{Student Teacher}} & \multicolumn{1}{c|}{\textbf{\begin{tabular}[c]{@{}c@{}}Normalizing \\ Flow\end{tabular}}} \\ \hline
    
    \multicolumn{2}{|c|}{\multirow{2}{*}{\textbf{\diagbox[width=13em]{Performance}{Strategy}}}} & 
    
    \multicolumn{1}{c|}{\textbf{DR{\AE}M}} & \multicolumn{1}{c|}{\textbf{PatchCore}} & \multicolumn{1}{c|}{\textbf{PaDiM}} & \multicolumn{1}{c|}{\textbf{CFA}}  & \multicolumn{1}{c|}{\textbf{STPFM}}  & \multicolumn{1}{c|}{\textbf{EfficientAD}}  & \multicolumn{1}{c|}{\textbf{FastFlow}} \\ \cline{3-9}
    
    \multicolumn{2}{|c|}{} & \multicolumn{1}{c|}{\textit{\begin{tabular}[c]{@{}c@{}}Replay\end{tabular}}} & \textit{\begin{tabular}[c]{@{}c@{}}CL\end{tabular}} & \multicolumn{1}{c|}{\textit{\begin{tabular}[c]{@{}c@{}}CL\end{tabular}}} & \multicolumn{1}{c|}{\textit{\begin{tabular}[c]{@{}c@{}}CL\end{tabular}}} & \multicolumn{1}{c|}{\textit{\begin{tabular}[c]{@{}c@{}}Replay\end{tabular}}} & \textit{\begin{tabular}[c]{@{}c@{}}Replay\end{tabular}} & \textit{\begin{tabular}[c]{@{}c@{}}Replay\end{tabular}}\\ \hline
    
    \multicolumn{1}{|l|}{\multirow{2}{*}{\textbf{Image - level}}} & 
    \textit{AUC ROC} & 0.75 & {\cellcolor{green!25}0.97} & {\cellcolor{red!25}0.56} & 0.92 & 0.87 & 0.81 & 0.84 \\ \cline{2-9} \multicolumn{1}{|l|}{} & 
    \textit{f1}      & 0.87 & {\cellcolor{green!25}0.97} & {\cellcolor{red!25}0.83} & 0.94 & 0.89 & 0.89 & 0.89 \\ \hline 
                        %1       2      3      4      5      6      7 
    \multicolumn{1}{|l|}{\multirow{4}{*}{\textbf{Pixel - level}}} & 
    \textit{AUC ROC} & 0.82                      &  {\cellcolor{green!25}0.98}  & {\cellcolor{red!25}0.73} & 0.93 & 0.93 & 0.88 & 0.91 \\ \cline{2-9}  \multicolumn{1}{|l|}{} & 
    \textit{f1}      & 0.32                      &  {\cellcolor{green!25}0.58}  & {\cellcolor{red!25}0.17} & 0.53 & 0.48 & 0.49 & 0.42 \\ \cline{2-9}  \multicolumn{1}{|l|}{} & 
    \textit{PR AUC}  & {\cellcolor{red!25}0.11}  &  {\cellcolor{green!25}0.55}  & 0.29                     & 0.49 & 0.43 & 0.43 & 0.35 \\ \cline{2-9}  \multicolumn{1}{|l|}{} & 
    \textit{AU PRO}  & 0.65                      &  {\cellcolor{green!25}0.89}  & {\cellcolor{red!25}0.53} & 0.75 & 0.85 & 0.67 & 0.73 \\ \hline 
    
    \multicolumn{1}{|l|}{\multirow{1}{*} {\textbf{Time}}} & 
    \textit{training} & {\cellcolor{red!25}11h 46min} & 8min & {\cellcolor{green!25}6min} & 2h 16min & 27min & 5h 26min & 2h 19min  \\ \cline{1-9} 
    
    \multicolumn{2}{|l|}{\textbf{\begin{tabular}[l]{@{}l@{}}Architecture memory [MB] \end{tabular}}} & 
    389.6 & 275.6 & 275.6 & 301.2 & 93.6 & {\cellcolor{green!25}82.8} &  {\cellcolor{red!25}{440.80}} \\ \hline
    
    \multicolumn{2}{|l|}{\textbf{Additional memory [MB]}}  & 
    {\cellcolor{green!25}59.0} & 184.3 & {\cellcolor{red!25}1541.0} & 67.7 & {\cellcolor{green!25}59.0} &  {\cellcolor{green!25}59.0} & {\cellcolor{green!25}59.0} \\ \hline
    
    \multicolumn{2}{|l|}{\textbf{Relative gap ($\delta$) [\%]}} & 
    7.50 & {\cellcolor{green!25}0.01} & {\cellcolor{red!25}35.00} & 7.33 & 2.00 & 7.00 & 9.00 \\\hline
    
    \multicolumn{2}{|l|}{\textbf{Average forgetting [\%]}} & 
    {\cellcolor{red!25}27.08} & 0.72 & 19.12 & {\cellcolor{green!25}-4.70} & 14.78 & 19.11 & 17.39 \\ \hline
    
    
    \end{tabular}
    \end{adjustbox}
    \end{table*}
    
    